<nb-card>
    <nb-card-header>
        <div class="titleHeader">
            <div class="titleLeft">
                <div class="LeftBgIcon">
                    <img class="img-head-logo" src="../../../../assets/icons/File.svg" />
                </div>
                <div class="LeftBgText">
                    <h2>File Manager</h2>
                    <p>
                        <!-- Email Services and Accounts used to send out emails from the server. -->
                    </p>
                </div>
            </div>
            <!-- <div class="titleRight">
                <button type="button" class="btn btn-primary" (click)="gotoadd()">
            Add Email Account
          </button>
            </div> -->
        </div>
    </nb-card-header>
    <nb-card-body>
        <div class="toolPnl">
            <button class="btnIcon btnFolder"><img src="../../../../assets/images/folder-icon.png"/>New Folder</button>
            <button class="btnIcon btnUpload"><img src="../../../../assets/images/upload-icon.png"/>Upload</button>
            <!-- <button class="btnIcon btnSort"><img src="../../../../assets/images/sort-icon.png"/>Sort by</button> -->
            <button class="btnIcon btnFolder"><img src="../../../../assets/images/fresh-icon.png" (click)="allFiles(5,0)">Refresh</button>
            <ul class='breadcrumb'>
                <li class="lendhand"  (click)="allFiles(5,0)">All Files & Folders </li>
         <li *ngFor="let breadcrumb of bread; index as i">
           <a  *ngIf="breadcrumb.name !== floderName " (click)="getFileId(breadcrumb,i)"> > {{ breadcrumb?.name }} </a>
           <p *ngIf="breadcrumb.name == floderName" >
     >  {{ breadcrumb?.name }}
           </p>
           
         </li>
       </ul>
        </div>

        <div class="row">
        <div class="col-md-8 col-lg-8 ">
            <div style="overflow-x:auto;">
             <table class="table table-bordered">
                <thead>
                    <tr>
                        <!-- <th scope="col">
                            Name
                            <i (click)="onSortClick($event, 'name')" [attr.class]="showallEmail | chevron: page.totalCount"></i>
                        </th> -->
                    
                        <th scope="col">Name</th>
                        <!-- <th scope="col">Size</th> -->
                        <th scope="col">Type</th>
                        <th scope="col">Edit</th>
                    </tr>
                </thead>
                
                

                    <tbody>
                        <tr *ngFor=" let files of fileManger | paginate
                  : {
                      id: '1',
                      itemsPerPage: page.pageSize,
                      currentPage: page.pageNumber,
                      totalItems: page.totalCount
                    };trackBy: trackByFn ; index as i ">
                            <td scope="row"  >
                                <!-- dblclick -->
                                <a class="lendhand" (click)="gotodetail(files)" (dblclick)="fileFolder(files,i)"> 
                                    {{files?.name}}
                                    <!-- <ngx-tooltip [data]="email?.name" [size]="50"> </ngx-tooltip> -->
                                    </a>
                            
                            </td>
                            
                            <!-- <td scope="row"  > -->
                                <!-- {{email?.size | filesize}} -->
                                <!-- <ngx-tooltip [data]="email?.size | filesize" [size]="50"> </ngx-tooltip> -->
                            <!-- </td> -->
                            <td scope="row"  >
                                {{files?.contentType}}
                                <!-- <ngx-tooltip [data]="email?.contentType" [size]="50"> </ngx-tooltip> -->
                            </td>
                            <td>
                                <a  (click)="openDeleteDialog(dialog, files)">
                                    <i class="fa fa-edit"> </i>
                                </a>
                            </td>
                            <!-- <td scope="row"  > -->
                                <!-- {{email?.createdOn | timeDate: 'll'}} -->
                                <!-- <ngx-tooltip [data]="email?.createdOn | timeDate: 'll'" [size]="50"> </ngx-tooltip> -->
                            <!-- </td> -->
                            <!-- <td>
                                <a (click)="gotodetail(email.id)">
                                    <i class="fa fa-eye" aria-hidden="true"></i>
                                </a>
                            </td>
                            <td>
                                <a (click)="gotoedit(email.id)">
                                    <i class="fa fa-edit"> </i>
                                </a>
                            </td>
                            <td>
                                <a (click)="open2(dialog, email.id)">
                                    <img src="../../../assets/images/del-icon.png" alt="Delete Icon" />
                                </a>
                            </td> -->
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-md-4 col-lg-4">
            <div class="square"> 
               
                <h2>File Manager Information</h2>
                 <table  class="file-info">
                     <tr>
                         <th>
                             Name
                         </th>
                         <td>
                             {{name}}
                         </td>
                     </tr>
                       <tr>
                         <th>
                             Size
                         </th>
                         <td>
                            {{size |filesize}}
                         </td>
                     </tr>
                       <tr>
                         <th>
                             Type
                         </th>
                         <td>
                             {{contentType}}
                         </td>
                     </tr>
                       <tr>
                         <th>
                             Modified
                         </th>
                         <td>
                           {{createdOn | timeDate :'ll'}}
                         </td>
                     </tr>
                     <tr>
                         <th>
                             Location
                         </th>
                         <td>
                         {{fullStoragePath}}
                         </td>
                     </tr>
                     
                 </table>
                 <div class="download-btn" >
                     <button type="button" class="btn btn-primary " (click)="onDown()"  >
           Download File
          </button>
                 </div>
                
                </div>
               
        </div>
       </div>
    </nb-card-body>
    <nb-card-body class="noTopPadding">
        <div class="row pagerow">
            <div class="col-md-8 col-lg-8 no-left-padding">
                <pagination-controls id="1" class="paginateDiv" previousLabel="Prev" nextLabel="Next" responsive="true" (pageChange)="pageChanged($event)" (pageBoundsCorrection)="pageChanged($event)" directionLinks="true" autoHide="true" screenReaderPaginationLabel="Pagination"
                    screenReaderPageLabel="page" screenReaderCurrentLabel="You're on page"></pagination-controls>
            </div>
            <div class="col-md-4 col-lg-4 text-right no-right-padding" *ngIf="get_perPage">
                <label class="label">Total {{ showpage.totalCount }} /</label>
                
                <select class="custom-select per-page-drop" (change)="per_page($event.target.value)">
            <option *ngFor="let item of itemsPerPage" [value]="item.id">
              {{ item.name }}
            </option>
          </select>
            </div>
        </div>
    </nb-card-body>
</nb-card>

<ng-template #dialog let-data let-ref="dialogRef">
    <form class="rename-popup" [formGroup]="filesFormgroup">
    <nb-card>
        <nb-card-header>
            <h6>Rename  {{fileType}}</h6>
        </nb-card-header>
        <nb-card-body>
            <div aria-labelledby="title">
            
                   <input type="input" nbInput fullWidth id="name" formControlName="name"
                  class="form-control" placeholder="Please enter  name" />
                  <div *ngIf="(f.name.touched || f.name.dirty) && f.name.invalid"
                  class="invalid-feedback-frm">
                  <div *ngIf="f.name.errors && f.name.errors.required">  Name is required.</div>
                  <div *ngIf="f.name.errors.minlength">
                     Name at least 3 characters long.
                  </div>
                  <div *ngIf="f.name.errors.maxlength">
                     Name at least 100 characters long.
                  </div>
                  <div *ngIf="f.name.errors.pattern">
                    Please enter valid  name .
                  </div>
                </div>
            </div>
        </nb-card-body>
        <nb-card-footer>
            <!-- [disabled]="isDeleted" (click)="del_agent(ref)" -->
            <button class="btn btn-primary" [disabled]="isSubmitted || !filesFormgroup.valid" >Save</button>
            <button class="btn btn-light" style="margin-left: 11px" (click)="ref.close()">
          Cancel
        </button>
 
        </nb-card-footer>
    </nb-card>
    </form>
</ng-template>